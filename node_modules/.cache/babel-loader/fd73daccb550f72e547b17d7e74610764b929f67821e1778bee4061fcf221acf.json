{"ast":null,"code":"var _jsxFileName = \"/Users/phamoanh/TMDT/WebAdminTechnology/src/views/reviseCategory.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport './revise.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ReviseCategory = () => {\n  _s();\n  const {\n    categoryId\n  } = useParams();\n  const navigate = useNavigate();\n  const [category, setCategory] = useState({\n    category_id: '',\n    name_category: '',\n    image_category: null // Thêm trường để lưu hình ảnh\n  });\n  const [error, setError] = useState('');\n  useEffect(() => {\n    const fetchCategory = async () => {\n      try {\n        const response = await axios.get(`http://localhost:3003/categories/${categoryId}`);\n        if (response.data) {\n          setCategory(response.data);\n        } else {\n          setError('Danh mục không tồn tại');\n        }\n      } catch (error) {\n        console.error('Error fetching category:', error);\n        setError('Lỗi khi tải danh mục');\n      }\n    };\n    fetchCategory();\n  }, [categoryId]);\n  const handleChange = e => {\n    const {\n      name,\n      value,\n      type,\n      files\n    } = e.target;\n    if (type === 'file') {\n      setCategory(prev => ({\n        ...prev,\n        [name]: files[0] // Lưu file vào state\n      }));\n    } else {\n      setCategory(prev => ({\n        ...prev,\n        [name]: value\n      }));\n    }\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    // Tạo FormData để gửi dữ liệu\n    const formData = new FormData();\n    formData.append('category_id', category.category_id);\n    formData.append('name_category', category.name_category);\n\n    // Kiểm tra và thêm hình ảnh vào FormData\n    if (category.image_category) {\n      formData.append('image_category', category.image_category);\n    }\n    try {\n      await axios.put(`http://localhost:3003/categories/${categoryId}`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      alert('Cập nhật danh mục thành công');\n      navigate('/categories');\n    } catch (error) {\n      console.error('Error updating category:', error);\n      setError('Lỗi khi cập nhật danh mục');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Ch\\u1EC9nh s\\u1EEDa danh m\\u1EE5c\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: 'red'\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"category_id\",\n        children: \"M\\xE3 danh m\\u1EE5c:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        id: \"category_id\",\n        name: \"category_id\",\n        value: category.category_id,\n        onChange: handleChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"name_category\",\n        children: \"T\\xEAn danh m\\u1EE5c:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"name_category\",\n        name: \"name_category\",\n        value: category.name_category,\n        onChange: handleChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"image_category\",\n        children: \"H\\xECnh \\u1EA3nh danh m\\u1EE5c:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        id: \"image_category\",\n        name: \"image_category\",\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"L\\u01B0u danh m\\u1EE5c\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n};\n_s(ReviseCategory, \"xxS+iwe9Rl8/pbAA+N3IBZdIPO4=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = ReviseCategory;\nexport default ReviseCategory;\nvar _c;\n$RefreshReg$(_c, \"ReviseCategory\");","map":{"version":3,"names":["React","useState","useEffect","axios","useParams","useNavigate","jsxDEV","_jsxDEV","ReviseCategory","_s","categoryId","navigate","category","setCategory","category_id","name_category","image_category","error","setError","fetchCategory","response","get","data","console","handleChange","e","name","value","type","files","target","prev","handleSubmit","preventDefault","formData","FormData","append","put","headers","alert","children","onSubmit","fileName","_jsxFileName","lineNumber","columnNumber","style","color","htmlFor","id","onChange","required","_c","$RefreshReg$"],"sources":["/Users/phamoanh/TMDT/WebAdminTechnology/src/views/reviseCategory.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport './revise.css';\n\nconst ReviseCategory = () => {\n  const { categoryId } = useParams();\n  const navigate = useNavigate();\n  const [category, setCategory] = useState({\n    category_id: '',\n    name_category: '',\n    image_category: null, // Thêm trường để lưu hình ảnh\n  });\n  const [error, setError] = useState(''); \n\n  useEffect(() => {\n    const fetchCategory = async () => {\n      try {\n        const response = await axios.get(`http://localhost:3003/categories/${categoryId}`);\n        if (response.data) {\n          setCategory(response.data);\n        } else {\n          setError('Danh mục không tồn tại'); \n        }\n      } catch (error) {\n        console.error('Error fetching category:', error);\n        setError('Lỗi khi tải danh mục');\n      }\n    };\n    fetchCategory();\n  }, [categoryId]);\n\n  const handleChange = (e) => {\n    const { name, value, type, files } = e.target;\n    if (type === 'file') {\n      setCategory((prev) => ({\n        ...prev,\n        [name]: files[0], // Lưu file vào state\n      }));\n    } else {\n      setCategory((prev) => ({\n        ...prev,\n        [name]: value,\n      }));\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    // Tạo FormData để gửi dữ liệu\n    const formData = new FormData();\n    formData.append('category_id', category.category_id);\n    formData.append('name_category', category.name_category);\n    \n    // Kiểm tra và thêm hình ảnh vào FormData\n    if (category.image_category) {\n      formData.append('image_category', category.image_category);\n    }\n\n    try {\n      await axios.put(`http://localhost:3003/categories/${categoryId}`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      });\n      alert('Cập nhật danh mục thành công');\n      navigate('/categories');\n    } catch (error) {\n      console.error('Error updating category:', error);\n      setError('Lỗi khi cập nhật danh mục');\n    }\n  };\n\n  return (\n    <div>\n      <form onSubmit={handleSubmit}>\n        <h1>Chỉnh sửa danh mục</h1>\n\n        {error && <p style={{ color: 'red' }}>{error}</p>} \n\n        <label htmlFor=\"category_id\">Mã danh mục:</label>\n        <input\n          type=\"number\"\n          id=\"category_id\"\n          name=\"category_id\"\n          value={category.category_id}\n          onChange={handleChange}\n          required\n        /><br /><br />\n\n        <label htmlFor=\"name_category\">Tên danh mục:</label>\n        <input\n          type=\"text\"\n          id=\"name_category\"\n          name=\"name_category\"\n          value={category.name_category}\n          onChange={handleChange}\n          required\n        /><br /><br />\n\n        <label htmlFor=\"image_category\">Hình ảnh danh mục:</label>\n        <input\n          type=\"file\"\n          id=\"image_category\"\n          name=\"image_category\"\n          onChange={handleChange}\n        /><br /><br />\n\n        <button type=\"submit\">Lưu danh mục</button>\n      </form>\n    </div>\n  );\n};\n\nexport default ReviseCategory;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}